<!-- Cart Sidebar Content (solo el contenido, sin el div contenedor) -->
<div class="cart-sidebar-header">
    <h5 class="mb-0">
        <i class="fas fa-shopping-cart me-2"></i>
        Tu Carrito
        <button type="button" class="btn-close float-end cart-close-btn"></button>
    </h5>
</div>
<div class="cart-sidebar-body">
    <% if (cart && cart.length > 0) { %>
        <!-- Restaurant Info -->
        <div class="restaurant-info mb-4 p-3 bg-light rounded">
            <div class="d-flex align-items-center">
                <i class="fas fa-store text-primary fs-4 me-3"></i>
                <div>
                    <h6 class="mb-1"><%= cart[0].restaurante_nombre %></h6>
                    <small class="text-muted">
                        <i class="fas fa-info-circle me-1"></i>
                        Solo puedes agregar productos del mismo restaurante
                    </small>
                </div>
            </div>
        </div>

        <!-- Cart Items -->
        <div class="cart-items">
            <% cart.forEach(item => { %>
                <div class="cart-item-row">
                    <div class="cart-item-img-container">
                        <img src="<%= item.imagen ? item.imagen : '/images/defaults/product.jpeg' %>"
                             alt="<%= item.name %>"
                             class="cart-item-image"
                             onerror="this.onerror=null;this.src='/images/defaults/product.jpeg';">
                    </div>
                    <div class="cart-item-main">
                        <div>
                            <div class="cart-item-name"><%= item.name %></div>
                            <div class="cart-item-price-unit">$<%= item.price.toFixed(2) %> c/u</div>
                        </div>
                        <div class="cart-item-controls-row">
                            <div class="quantity-controls">
                                <button class="cart-qty-btn" data-action="decrement" data-producto-id="<%= item.producto_id %>">
                                    <i class="fa-solid fa-minus"></i>
                                </button>
                                <span class="btn-quantity-text"><%= item.quantity %></span>
                                <button class="cart-qty-btn" data-action="increment" data-producto-id="<%= item.producto_id %>">
                                    <i class="fa-solid fa-plus"></i>
                                </button>
                                <button class="remove-item-btn" data-producto-id="<%= item.producto_id %>">
                                    <i class="fa-solid fa-xmark"></i>
                                </button>
                            </div>
                            <div class="cart-item-price-total">
                                <strong>$<%= (item.price * item.quantity).toFixed(2) %></strong>
                            </div>
                        </div>
                    </div>
                </div>
            <% }) %>
        </div>

        <!-- Cart Summary -->
        <div class="cart-summary">
            <!-- Clear Cart Button -->
            <div class="text-end mt-3">
                <button class="btn btn-outline-danger clear-cart-btn">
                    <i class="fas fa-trash me-2"></i>
                    Vaciar Carrito
                </button>
            </div>
            <div class="d-flex justify-content-between mb-2">
                <span>Subtotal</span>
                <strong>$<%= subtotal.toFixed(2) %></strong>
            </div>
        </div>
    <% } else { %>
        <div class="text-center py-5">
            <i class="fas fa-shopping-cart fa-3x text-muted mb-3"></i>
            <h5>Tu carrito está vacío</h5>
            <p class="text-muted">Agrega productos de tus restaurantes favoritos</p>
            <a href="/search" class="btn mt-3" style="background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%); color: white; border: none;">
                <i class="fas fa-utensils me-2"></i>
                Ver Restaurantes
            </a>
        </div>
    <% } %>
</div>
