<% if (user && user.tipo_usuario === 'admin') { %>
<nav class="admin-mobile-nav">
  <a href="/admin" class="admin-mobile-nav-item <%= currentPath === '/admin' ? 'active' : '' %>">
    <div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
      <i class="fas fa-chart-bar"></i><span>Dashboard</span>
    </div>
  </a>
  <a href="/admin/restaurantes" class="admin-mobile-nav-item <%= currentPath.startsWith('/admin/restaurantes') ? 'active' : '' %>">
    <div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
      <i class="fas fa-store"></i><span>Restaurantes</span>
    </div>
  </a>
  <a href="/admin/cobros" class="admin-mobile-nav-item <%= currentPath.startsWith('/admin/cobros') ? 'active' : '' %>">
    <div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
      <i class="fas fa-money-bill-wave"></i><span>Cobros</span>
    </div>
  </a>
  <a href="/admin/productos" class="admin-mobile-nav-item <%= currentPath.startsWith('/admin/productos') ? 'active' : '' %>">
    <div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
      <i class="fas fa-utensils"></i><span>Productos</span>
    </div>
  </a>

  <div class="admin-mobile-nav-more-container">
    <a href="#" class="admin-mobile-nav-item" id="adminMobileNavToggle">
      <div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
        <i class="fas fa-plus-circle"></i><span id="adminMobileNavToggleText">Más</span>
      </div>
    </a>
    <div class="admin-mobile-nav-hidden-items" style="display: none;">
      <a href="/admin/comprobantes" class="admin-mobile-nav-item <%= currentPath.startsWith('/admin/comprobantes') ? 'active' : '' %>">
        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
          <i class="fas fa-receipt"></i><span>Comprobantes</span>
        </div>
      </a>
      <a href="/admin/usuarios" class="admin-mobile-nav-item <%= currentPath.startsWith('/admin/usuarios') ? 'active' : '' %>">
        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
          <i class="fas fa-users"></i><span>Usuarios</span>
        </div>
      </a>
      <a href="/admin/reportes" class="admin-mobile-nav-item <%= currentPath.startsWith('/admin/reportes') ? 'active' : '' %>">
        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
          <i class="fas fa-chart-line"></i><span>Reportes</span>
        </div>
      </a>
      <a href="/admin/configuracion" class="admin-mobile-nav-item <%= currentPath.startsWith('/admin/configuracion') ? 'active' : '' %>">
        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
          <i class="fas fa-cog"></i><span>Config</span>
        </div>
      </a>
    </div>
  </div>
</nav>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const toggleButton = document.getElementById('adminMobileNavToggle');
    const toggleText = document.getElementById('adminMobileNavToggleText');
    const hiddenItems = document.querySelector('.admin-mobile-nav-hidden-items');
    const navContainer = document.querySelector('.admin-mobile-nav');

    if (toggleButton && hiddenItems && navContainer) {
      toggleButton.addEventListener('click', function(e) {
        e.preventDefault();
        if (hiddenItems.style.display === 'none') {
          hiddenItems.style.display = 'flex';
          toggleButton.querySelector('i').classList.remove('fa-plus-circle');
          toggleButton.querySelector('i').classList.add('fa-minus-circle');
          toggleText.textContent = 'Menos';
        } else {
          hiddenItems.style.display = 'none';
          toggleButton.querySelector('i').classList.remove('fa-minus-circle');
          toggleButton.querySelector('i').classList.add('fa-plus-circle');
          toggleText.textContent = 'Más';
        }
      });

      // Check if any hidden item is active on load and expand if so
      const activeHiddenItem = hiddenItems.querySelector('.admin-mobile-nav-item.active');
      if (activeHiddenItem) {
        hiddenItems.style.display = 'flex';
        navContainer.style.flexDirection = 'column';
        toggleButton.querySelector('i').classList.remove('fa-plus-circle');
        toggleButton.querySelector('i').classList.add('fa-minus-circle');
        toggleText.textContent = 'Menos';
      }
    }
  });
</script>
<% } %>