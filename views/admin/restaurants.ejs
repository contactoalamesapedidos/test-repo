<div class="restaurant-list">
  <% restaurants.forEach(restaurant => { %>
    <div class="restaurant-card">
      <div class="restaurant-header">
        <div class="restaurant-image">
          <img src="/uploads/<%= restaurant.imagen_logo || 'no-image.png' %>" 
               alt="<%= restaurant.nombre %>"
               onerror="this.src='/images/no-image.png'">
        </div>
        <div class="restaurant-info">
          <h3><%= restaurant.nombre %></h3>
          <% if (restaurant.categorias) { %>
            <div class="restaurant-categories">
              <% restaurant.categorias.split(',').forEach((categoria, index) => { %>
                <span class="badge bg-primary"><%= categoria.trim() %></span>
                <% if (index < restaurant.categorias.split(',').length - 1) { %> â€¢ <% } %>
              <% }); %>
            </div>
          <% } %>
          <div class="restaurant-status">
            <span class="badge <%= restaurant.activo ? 'bg-success' : 'bg-danger' %>">
              <%= restaurant.activo ? 'Activo' : 'Inactivo' %>
            </span>
            <span class="badge <%= restaurant.verificado ? 'bg-info' : 'bg-warning' %>">
              <%= restaurant.verificado ? 'Verificado' : 'Pendiente' %>
            </span>
          </div>
        </div>
      </div>
      <div class="restaurant-details">
        <div class="detail">
          <i class="fas fa-phone"></i>
          <span><%= restaurant.telefono %></span>
        </div>
        <div class="detail">
          <i class="fas fa-envelope"></i>
          <span><%= restaurant.email_contacto %></span>
        </div>
        <div class="detail">
          <i class="fas fa-map-marker-alt"></i>
          <span><%= restaurant.direccion %>, <%= restaurant.ciudad %></span>
        </div>
        <div class="detail">
          <i class="fas fa-clock"></i>
          <span><%= restaurant.horario_apertura %> - <%= restaurant.horario_cierre %></span>
        </div>
      </div>
      <div class="restaurant-stats">
        <div class="stat">
          <i class="fas fa-utensils"></i>
          <span><%= restaurant.total_productos %> productos</span>
        </div>
        <div class="stat">
          <i class="fas fa-shopping-cart"></i>
          <span><%= restaurant.total_pedidos %> pedidos</span>
        </div>
        <div class="stat">
          <i class="fas fa-star"></i>
          <span><%= restaurant.calificacion_promedio ? restaurant.calificacion_promedio.toFixed(1) : 'N/A' %></span>
        </div>
      </div>
      <div class="restaurant-actions">
        <a href="/admin/restaurants/<%= restaurant.id %>/edit" class="btn btn-primary">
          <i class="fas fa-edit"></i> Editar
        </a>
        <button class="btn <%= restaurant.activo ? 'btn-danger' : 'btn-success' %> toggle-status"
                data-id="<%= restaurant.id %>"
                data-action="<%= restaurant.activo ? 'deactivate' : 'activate' %>">
          <i class="fas fa-<%= restaurant.activo ? 'times' : 'check' %>"></i>
          <%= restaurant.activo ? 'Desactivar' : 'Activar' %>
        </button>
        <button class="btn <%= restaurant.verificado ? 'btn-warning' : 'btn-info' %> toggle-verification"
                data-id="<%= restaurant.id %>"
                data-action="<%= restaurant.verificado ? 'unverify' : 'verify' %>">
          <i class="fas fa-<%= restaurant.verificado ? 'times' : 'check' %>"></i>
          <%= restaurant.verificado ? 'Desverificar' : 'Verificar' %>
        </button>
      </div>
    </div>
  <% }); %>
</div> 